{% extends "base.html" %}
{% block title %}Stores - {{ business.name }}{% endblock %}
{% block page_title %}{{ business.name }} - Stores{% endblock %}
{% block content %}
<div class="row g-4">
  <div class="col-lg-8">
    <div class="card border-0 shadow-sm">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead class="table-light"><tr><th>Store Name</th><th>Address</th><th>Phone</th><th>Actions</th></tr></thead>
          <tbody>
            {% for s in stores %}
            <tr>
              <td><strong>{{ s.name }}</strong></td>
              <td>{{ s.address or '-' }}</td>
              <td>{{ s.phone or '-' }}</td>
              <td>
                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editModal{{ s.id }}">Edit</button>
                <form method="post" action="{{ url_for('business.delete_store', store_id=s.id) }}" class="d-inline" onsubmit="return confirm('Delete?')">
                  <button class="btn btn-sm btn-outline-danger">Delete</button>
                </form>
              </td>
            </tr>
            <!-- Edit Modal -->
            <div class="modal fade" id="editModal{{ s.id }}" tabindex="-1"><div class="modal-dialog"><div class="modal-content">
              <form method="post" action="{{ url_for('business.edit_store', store_id=s.id) }}">
              <div class="modal-header"><h5 class="modal-title">Edit Store</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
              <div class="modal-body">
                <div class="mb-3"><label class="form-label">Name</label><input type="text" name="name" class="form-control" value="{{ s.name }}" required></div>
                <div class="mb-3"><label class="form-label">Address</label><input type="text" name="address" class="form-control" value="{{ s.address or '' }}"></div>
                <div class="mb-3"><label class="form-label">Phone</label><input type="text" name="phone" class="form-control" value="{{ s.phone or '' }}"></div>
              </div>
              <div class="modal-footer"><button type="submit" class="btn btn-primary">Save</button></div>
              </form>
            </div></div></div>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="col-lg-4">
    <div class="card border-0 shadow-sm">
      <div class="card-header bg-white"><h6 class="mb-0">Add New Store</h6></div>
      <div class="card-body">
        <form method="post" action="{{ url_for('business.create_store', business_id=business.id) }}">
          <div class="mb-3"><label class="form-label">Store Name *</label><input type="text" name="name" class="form-control" required></div>
          <div class="mb-3"><label class="form-label">Address</label><input type="text" name="address" class="form-control"></div>
          <div class="mb-3"><label class="form-label">Phone</label><input type="text" name="phone" class="form-control"></div>
          <button type="submit" class="btn btn-primary w-100">Add Store</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
